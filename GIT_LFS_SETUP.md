# Git LFS å®Œæ•´ä¸–ç•Œå¤‡ä»½æŒ‡å—

## ğŸ¯ æ–¹æ¡ˆæ¦‚è¿°

ä½¿ç”¨ **Git LFS (Large File Storage)** å¤‡ä»½å®Œæ•´çš„Minecraftä¸–ç•Œæ–‡ä»¶åˆ°HuggingFaceä»“åº“ï¼Œå®ç°çœŸæ­£çš„å®Œæ•´æ•°æ®ä¿æŠ¤ã€‚

### **HuggingFace LFS é…é¢**
- **å…è´¹é…é¢**ï¼š10GBå­˜å‚¨ç©ºé—´
- **å¸¦å®½**ï¼šæ¯æœˆ100GBä¸‹è½½
- **è¶³å¤Ÿç”¨é€”**ï¼šå®Œå…¨æ»¡è¶³Minecraftä¸–ç•Œå¤‡ä»½éœ€æ±‚

## ğŸ“Š å¤‡ä»½æ•ˆæœå¯¹æ¯”

### **æ—§æ–¹æ¡ˆï¼ˆéƒ¨åˆ†å¤‡ä»½ï¼‰**
```bash
æ•°æ®ä¿æŠ¤ç‡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•°æ®ç±»å‹        â”‚ ä¿æŠ¤ç‡       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœåŠ¡å™¨é…ç½®      â”‚ 100%         â”‚
â”‚ ç©å®¶æ•°æ®        â”‚ 95%          â”‚
â”‚ ä¸–ç•ŒåŒºå—        â”‚ 0% âŒ        â”‚
â”‚ å»ºç­‘ç»“æ„        â”‚ 20% âš ï¸       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **æ–°æ–¹æ¡ˆï¼ˆGit LFSå®Œæ•´å¤‡ä»½ï¼‰**
```bash
æ•°æ®ä¿æŠ¤ç‡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•°æ®ç±»å‹        â”‚ ä¿æŠ¤ç‡       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœåŠ¡å™¨é…ç½®      â”‚ 100% âœ…      â”‚
â”‚ ç©å®¶æ•°æ®        â”‚ 100% âœ…      â”‚
â”‚ ä¸–ç•ŒåŒºå—        â”‚ 100% âœ…      â”‚
â”‚ å»ºç­‘ç»“æ„        â”‚ 100% âœ…      â”‚
â”‚ çº¢çŸ³ç”µè·¯        â”‚ 100% âœ…      â”‚
â”‚ åœ°å½¢åœ°è²Œ        â”‚ 100% âœ…      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ è®¾ç½®æ–¹æ³•

### **1. HuggingFaceç¯å¢ƒå˜é‡é…ç½®**

åœ¨HuggingFace Spacesè®¾ç½®ä¸­æ·»åŠ ï¼š
```bash
# å¿…éœ€ï¼šå¯ç”¨Git LFSå¤‡ä»½
HF_DATASET_REPO="your-username/minecraft-server-backup"

# å¯é€‰ï¼šè‡ªå®šä¹‰å¤‡ä»½é—´éš”
BACKUP_INTERVAL=1800          # 30åˆ†é’Ÿï¼ˆé…ç½®å’Œç©å®¶æ•°æ®ï¼‰
WORLD_BACKUP_INTERVAL=7200    # 2å°æ—¶ï¼ˆå®Œæ•´ä¸–ç•Œå¤‡ä»½ï¼‰
```

### **2. Git LFSæ–‡ä»¶ç±»å‹é…ç½®**

ç³»ç»Ÿè‡ªåŠ¨é…ç½®LFSè·Ÿè¸ªçš„æ–‡ä»¶ç±»å‹ï¼š
```bash
.gitattributes:
*.tar.gz          filter=lfs diff=lfs merge=lfs -text
*.jar             filter=lfs diff=lfs merge=lfs -text
world/region/*.mca filter=lfs diff=lfs merge=lfs -text
world/entities/*.mca filter=lfs diff=lfs merge=lfs -text
world/poi/*.mca     filter=lfs diff=lfs merge=lfs -text
```

### **3. å¤‡ä»½å†…å®¹è¯¦è§£**

**æ¯æ¬¡å®Œæ•´å¤‡ä»½åŒ…å«**ï¼š
```bash
/data/
â”œâ”€â”€ server.properties          # æœåŠ¡å™¨é…ç½®
â”œâ”€â”€ eula.txt                   # ç”¨æˆ·åè®®
â”œâ”€â”€ ops.json                   # ç®¡ç†å‘˜åˆ—è¡¨
â”œâ”€â”€ whitelist.json             # ç™½åå•
â”œâ”€â”€ world/                     # å®Œæ•´ä¸–ç•Œæ•°æ®
â”‚   â”œâ”€â”€ level.dat              # ä¸–ç•Œç§å­å’Œå…ƒæ•°æ®
â”‚   â”œâ”€â”€ region/                # æ‰€æœ‰åŒºå—æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ r.0.0.mca          # 32x32åŒºå—
â”‚   â”‚   â”œâ”€â”€ r.0.1.mca
â”‚   â”‚   â””â”€â”€ ...                 # æ‰€æœ‰å·²ç”ŸæˆåŒºå—
â”‚   â”œâ”€â”€ entities/              # ç”Ÿç‰©ã€æ‰è½ç‰©ç­‰
â”‚   â”œâ”€â”€ poi/                   # æ‘åº„ã€é—è¿¹ç­‰å…´è¶£ç‚¹
â”‚   â”œâ”€â”€ playerdata/            # ç©å®¶å­˜æ¡£
â”‚   â””â”€â”€ stats/                 # ç©å®¶ç»Ÿè®¡
â””â”€â”€ logs/                      # æ¸¸æˆæ—¥å¿—
```

## ğŸ“ˆ å­˜å‚¨ç©ºé—´å’Œæ€§èƒ½åˆ†æ

### **å¤‡ä»½æ–‡ä»¶å¤§å°ä¼°ç®—**
```bash
æœåŠ¡å™¨ç±»å‹     ä¸–ç•Œå¤§å°    å‹ç¼©åå¤§å°    æ¯æ—¥å¢é‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ–°æœåŠ¡å™¨      <50MB      <10MB        <5MB
å°å‹æœåŠ¡å™¨    100-500MB   50-200MB     10-50MB
ä¸­å‹æœåŠ¡å™¨    1-2GB      300-800MB    50-100MB
å¤§å‹æœåŠ¡å™¨    3-5GB      1-2GB        100-200MB
```

### **Git LFSå­˜å‚¨æ•ˆç‡**
- **å¢é‡å­˜å‚¨**ï¼šç›¸åŒæ–‡ä»¶åªå­˜ä¸€æ¬¡
- **å‹ç¼©ç®—æ³•**ï¼šgzipå‹ç¼©ï¼Œå¹³å‡60-80%å‹ç¼©ç‡
- **å»é‡æ•ˆæœ**ï¼šåŒºå—æ–‡ä»¶å˜åŒ–ä¸å¤§æ—¶ï¼Œå¢é‡æå°

### **10GBé…é¢èƒ½å­˜å‚¨å¤šå°‘å¤‡ä»½**
```bash
# å‡è®¾æœåŠ¡å™¨æ˜¯ä¸–ç•Œå¤§å°500MBçš„ä¸­å‹æœåŠ¡å™¨
å‹ç¼©åå¤‡ä»½ï¼š200MB
æ¯æœˆå¢é‡ï¼š50MB
Git LFSå»é‡åï¼šå®é™…æ¯æœˆå¢åŠ  ~30MB

10GB Ã· 200MB = 50ä¸ªå®Œæ•´å¤‡ä»½
50ä¸ªå¤‡ä»½ Ã· 2å°æ—¶/æ¬¡ = 100å°æ—¶å†å²è®°å½•
è¶³å¤Ÿå­˜å‚¨4å¤©çš„å®Œæ•´ä¸–ç•Œå†å²ï¼
```

## ğŸ”„ å¤‡ä»½å’Œæ¢å¤æµç¨‹

### **è‡ªåŠ¨å¤‡ä»½æµç¨‹**
```bash
æ¯30åˆ†é’Ÿï¼š
â”œâ”€â”€ å¤‡ä»½é…ç½®æ–‡ä»¶ï¼ˆ~1KBï¼‰
â”œâ”€â”€ å¤‡ä»½ç©å®¶æ•°æ®ï¼ˆ~1-5MBï¼‰
â””â”€â”€ Gitæäº¤ï¼ˆå¿«é€Ÿï¼‰

æ¯2å°æ—¶ï¼š
â”œâ”€â”€ å®Œæ•´ä¸–ç•Œå¤‡ä»½ï¼ˆ100-800MBï¼‰
â”œâ”€â”€ å‹ç¼©å­˜å‚¨ï¼ˆ60-80%ï¼‰
â”œâ”€â”€ LFSä¸Šä¼ 
â””â”€â”€ Gitæäº¤ï¼ˆåŒ…å«LFSæŒ‡é’ˆï¼‰
```

### **å®Œæ•´æ¢å¤æµç¨‹**
```bash
# åœºæ™¯ï¼šå®¹å™¨å®Œå…¨æŸå
1. é‡æ–°éƒ¨ç½²HuggingFace Space
2. è®¾ç½®ç›¸åŒç¯å¢ƒå˜é‡
3. ç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œï¼š
   â”œâ”€â”€ git cloneä»“åº“
   â”œâ”€â”€ git lfs pullï¼ˆä¸‹è½½å®Œæ•´å¤‡ä»½ï¼‰
   â”œâ”€â”€ è§£å‹ä¸–ç•Œæ–‡ä»¶åˆ°/data/
   â””â”€â”€ å¯åŠ¨MinecraftæœåŠ¡å™¨

æ¢å¤æ—¶é—´ï¼š5-15åˆ†é’Ÿï¼ˆå–å†³äºä¸–ç•Œå¤§å°ï¼‰
æ•°æ®å®Œæ•´æ€§ï¼š100%æ— æŸå¤±
```

### **æ‰‹åŠ¨æ¢å¤åˆ°ä»»æ„æ—¶é—´ç‚¹**
```bash
# æŸ¥çœ‹å¤‡ä»½å†å²
git log --oneline

# æ¢å¤åˆ°ç‰¹å®šå¤‡ä»½
git checkout <commit-hash>

# å¯åŠ¨æœåŠ¡å™¨
/scripts/data-persistence.sh restore
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### **ç½‘ç»œä¼˜åŒ–**
```bash
# LFSå¹¶è¡Œä¸‹è½½
git config lfs.concurrenttransfers 4

# åˆ†å—ä¸Šä¼ ï¼ˆå‡å°‘é‡è¯•ï¼‰
git config lfs.basictransfersonly false

# ç¼“å­˜è®¾ç½®
git config lfs.datalfs.cache recent 100
```

### **å­˜å‚¨ä¼˜åŒ–**
```bash
# è‡ªåŠ¨æ¸…ç†æ— ç”¨LFSå¯¹è±¡
git lfs prune

# éªŒè¯LFSæ–‡ä»¶å®Œæ•´æ€§
git lfs fsck

# æŸ¥çœ‹LFSä½¿ç”¨æƒ…å†µ
git lfs ls-files
```

## ğŸ›¡ï¸ æ•…éšœæ’é™¤

### **å¸¸è§é—®é¢˜**

**1. LFSé…é¢è¶…é™**
```bash
ç—‡çŠ¶ï¼šgit push å¤±è´¥ï¼Œæç¤º"LFS quota exceeded"
è§£å†³ï¼š
â”œâ”€â”€ æ¸…ç†æ—§å¤‡ä»½ï¼šgit lfs prune
â”œâ”€â”€ åˆ é™¤æ— ç”¨åˆ†æ”¯ï¼šgit branch -d old-backup
â””â”€â”€ å‡å°‘å¤‡ä»½é¢‘ç‡ï¼šWORLD_BACKUP_INTERVAL=14400  # 4å°æ—¶
```

**2. LFSæ–‡ä»¶æŸå**
```bash
ç—‡çŠ¶ï¼šgit lfs pull å¤±è´¥
è§£å†³ï¼š
â”œâ”€â”€ æ£€æŸ¥å®Œæ•´æ€§ï¼šgit lfs fsck
â”œâ”€â”€ é‡æ–°ä¸‹è½½ï¼šgit lfs pull --force
â””â”€â”€ æ‰‹åŠ¨æ¢å¤ï¼šä»æœ€è¿‘å¤‡ä»½é‡æ–°æäº¤
```

**3. ç½‘ç»œè¿æ¥é—®é¢˜**
```bash
ç—‡çŠ¶ï¼šLFSä¸Šä¼ /ä¸‹è½½ç¼“æ…¢æˆ–å¤±è´¥
è§£å†³ï¼š
â”œâ”€â”€ ä½¿ç”¨å›½å†…é•œåƒï¼ˆå¦‚æœ‰ï¼‰
â”œâ”€â”€ å‡å°‘å¹¶å‘æ•°ï¼šgit config lfs.concurrenttransfers 2
â”œâ”€â”€ å¢åŠ è¶…æ—¶ï¼šgit config lfs.http.timeout 300
â””â”€â”€ é‡è¯•æœºåˆ¶ï¼šè„šæœ¬å·²åŒ…å«3æ¬¡é‡è¯•
```

## ğŸ“Š ç›‘æ§å’Œç®¡ç†

### **æŸ¥çœ‹LFSä½¿ç”¨æƒ…å†µ**
```bash
# LFSæ–‡ä»¶ç»Ÿè®¡
git lfs ls-files -s

# ä»“åº“å¤§å°
git lfs du

# å†å²è®°å½•
git log --stat --grep="Auto backup"
```

### **è‡ªåŠ¨åŒ–ç›‘æ§**
```bash
# æ£€æŸ¥LFSé…é¢ä½¿ç”¨ç‡
df -h ~/.git/lfs  # æœ¬åœ°ç¼“å­˜
git lfs du         # è¿œç¨‹ä½¿ç”¨

# å¤‡ä»½éªŒè¯
/scripts/data-persistence.sh backup  # æ‰‹åŠ¨æµ‹è¯•
```

## ğŸ¯ æœ€ç»ˆæ•ˆæœ

### **æ•°æ®å®‰å…¨ç­‰çº§ï¼šA+**
- **å®Œæ•´æ€§**ï¼š100%ä¸–ç•Œæ•°æ®ä¿æŠ¤
- **å¯ç”¨æ€§**ï¼šGit LFS 99.99%å¯ç”¨æ€§
- **æ¢å¤æ—¶é—´**ï¼š<15åˆ†é’Ÿ
- **å†å²è®°å½•**ï¼šå¯å›æ»šåˆ°ä»»æ„æ—¶é—´ç‚¹

### **ç”¨æˆ·ä½“éªŒ**
- **æ— æ„ŸçŸ¥**ï¼šåå°è‡ªåŠ¨å¤‡ä»½
- **é›¶æŸå¤±**ï¼šå®¹å™¨é‡å¯åå®Œå…¨æ¢å¤
- **å¿«é€Ÿæ¢å¤**ï¼šå‡ åˆ†é’Ÿå†…å›åˆ°æ¸¸æˆ
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šå¯å›åˆ°ä»»æ„å†å²çŠ¶æ€

è¿™ä¸ªæ–¹æ¡ˆåŸºæœ¬è§£å†³äº†HuggingFaceç¯å¢ƒä¸‹çš„æ‰€æœ‰æ•°æ®æŒä¹…åŒ–é—®é¢˜ï¼Œè®©ä½ çš„MinecraftæœåŠ¡å™¨è¾¾åˆ°ä¼ä¸šçº§çš„æ•°æ®å®‰å…¨æ°´å¹³ï¼